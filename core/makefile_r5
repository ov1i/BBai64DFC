ifeq ($(RULES_MAKE), )
include $(PDK_INSTALL_PATH)/ti/build/Rules.make
else
include $(RULES_MAKE)
endif

APP_NAME = dfc_app

SRCDIR += . src src/common src/common/clusters src/common/clusters_configs src/core_r5f2_0
INCDIR += interface interface/common interface/common/types
PACKAGE_SRCS_COMMON += .

CFLAGS_LOCAL_COMMON += -DFREERTOS $(PDK_CFLAGS)
INCLUDE_EXTERNAL_INTERFACES += pdk freertos $(EXTERNAL_INTERFACES) 

COMP_LIST_COMMON += ipc freertos $(PDK_COMMON_FREERTOS_COMP)

SRCS_COMMON += r5f/rsc_table.c 
SRCS_COMMON_CPP += rtos_main.cpp i2c/i2c_helper.cpp imu/mpu9250.cpp ekf/ekf.cpp barometer/bmp280.cpp pwm/PWMgen.cpp controller/PIDController.cpp 
SRCS_COMMON_CPP += controller/rcIA6.cpp comms/RPMsg_helper.cpp comms/TraceLogger.cpp

EXTERNAL_LNKCMD_FILE_LOCAL = $(PDK_INSTALL_PATH)/ti/drv/ipc/examples/DFC/src/common/clusters/$(ISA)/lnk_$(ISA)_$(CORE).lds
APPEND_LNKCMD_FILE += $(PDK_INSTALL_PATH)/ti/drv/ipc/examples/DFC/src/common/clusters/memory_map_ddr.cmd

ifeq ($(MAKERULEDIR), )
  MAKERULEDIR := $(ROOTDIR)/ti/build/makerules
  export MAKERULEDIR
endif
include $(MAKERULEDIR)/common.mk
